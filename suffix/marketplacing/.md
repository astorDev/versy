# Marketplacing a Shell GitHub Action

<img src="./ferret-in-bazaar.jpeg" width="400"/>

This all started with me wanting a CI versioning system. I needed a GitHub action. In the GitHub marketplace. I also wanted the action's logic to be reusable elsewhere. With that in mind, I've opened my machine and start coding.

> Based on a true story.

## Overcoming GitHub Marketplace Limitations

I have a strict routine: git flow, constant and thorough testing, small.  Before the story we need to understand how GitHub Marketplace makes live harder. There is [quite a few](https://docs.github.com/en/actions/creating-actions/publishing-actions-in-github-marketplace#about-publishing-actions) limitations for a marketplace actions. Here are the ones that bit me:

1. Repository must **not** contain any workflow files.
2. Repository must contain a single action.
3. The action's metadata file (`action.yml` or `action.yaml`) must be in the root directory of the repository.

My envisioned repository started to fall apart. My ambition was to create a comprensive project with a few cohesive actions and scripts. The rules not only block that but also make it impossible to **fully** test the action. A rich repository was stuck as a goal in my head. A poor project was manifesting itself from the limitations. I was looking for a match. So, I've decided to have two:

- The "Motherland" Repository. The actual logic, workflows and tests, and basically everything important lays here.
- The "Marketplace" Repository. The tiniest wrapper around the action from the motherland repository with no purpose other than satisfying marketplace terms.